---
layout: post
title: 서비스 워커와 프로그레시브 웹 앱
gh-repo: daattali/beautiful-jekyll
gh-badge: [star, fork, follow]
tags: [test]
comments: true
---


이번에 다룰 주제는 서비스워커와 프로그레시브 웹 앱입니다.


웹의 진화는 정말 빠릅니다. 웹으로 할 수 있는 게 점점 더 많아진다는 것은 웹 개발자들에게는 즐거운 일입니다. 

요즘은 웹의 단점을 보완할 수 있는 기술들도 점점 더 진화하고 있습니다. 

처음 HTML5가 발표됐을 때만 해도, 웹에서 직접 동영상을 실행할 수 있다는 것만 해도 꽤 놀라운 일이었습니다. <br />
HTML5 이전에는 웹에서 동영상을 실행하려 해도, 꽤나 많은 코드가 필요하곤 했고, 툭하면 관련 스크립트가 작동을 멈추면서 사용자에게 '스크립트를 계속 실행하시겠습니까?' 하는 불쾌한 메시지를 던지기 일쑤였습니다. <br />그것을 피하려면 사용자가 직접 동영상 프로그램을 다운받아 설치하도록 유도해야 했죠.

하지만, 지금은 사용자 경험을 향상시킬 수 있는 강력한 브라우저 API가 매우 많습니다. 

백그라운드 API, 알림 API 등을 이용하면 브라우저를 띄우지 않았을 때도 서비스워커로 작업할 수 있습니다. 사용자가 스마트폰을 주머니에 둔 사이에, 또는 브라우저를 끄고 컴퓨터 앞에서 자리를 비운 사이에도 데이터를 동기화하고 웹사이트 방문자에게 알림을 보낼 수 있습니다. 

"어? 그건 웹이 아니라 네이티브 앱 아냐?"라는 생각이 들 수 있지만, 분명한 웹입니다. 

위와 같은 최신 기능을 지원하는 웹사이트를 '프로그레시브 웹 앱'이라고 합니다. 

### 프로그레시브 웹 앱

앱이라고 이름 붙여져 있지만 분명한 웹이고, 웹에 이런저런 기능들이 더해졌을 뿐입니다. 

그래서 저는 이런 이름을 별로 좋아하지 않습니다. 앱이 아닌데도 앱이라고 이름 붙여서 혼동을 유발하거든요.

프로그레시브 웹 앱이라는 용어는 웹 디자이너인 프랜시스 베리먼(Frances Beriman)이라는 사람이 붙인 이름입니다. 

그의 [웹사이트](https://fberriman.com/2017/06/26/naming-progressive-web-apps/)에서 왜 이런 이름을 붙였는지 밝히고 있으니 심심하면 한 번 읽어봐도 좋겠네요.

프랜시스 베리먼은 프로그레시브 웹 앱이라는 용어는 <span style="color:blue">"당신의 상사, 투자자, 마케팅 담당자를 위한"</span> 것이며, <span style="color:blue">"HTML5가 HTML과 별 관련이 없는 것처럼 마케팅 용어"</span>라고 말합니다. 


프로그레시브 웹 앱을 제대로 구현해 놓는다면 "다운로드에 대해 mb 당 비용을 지불해야하는 사용자, 낡은 폰을 가지고있는 사용자"들에게 설치형 앱과 유사한 경험을 줄 수 있습니다.

이 프로그레시브 웹 앱의 기술적 기반이 되는 것이 바로 서비스 워커입니다. 


### 자바스크립트 워커

서비스 워커는 자바스크립트 워커(Javascript Worker) 중 하나입니다. 

자바스크립트가 웹에서 실행되는 환경은 점점 좋아지고 있습니다. 브라우저의 자바스크립트 엔진이 빠르게 발전하면서 자바스크립트 실행 환경은 과거에 비해 비약적으로 좋아졌습니다. 

하지만, 여전히 자바스크립트의 발목을 잡고 있는게 있는데, 그것은 자바스크립트 언어 자체의 특성입니다. 

자바스크립트는 단일 스레드 언어입니다. 아무리 처리할 일이 많아도 한 번에 하나씩만 처리하죠.

대단히 복잡하고 큰 일을 처리하고 있다면, 다른 일들은 그 일이 다 끝날 때까지 마냥 대기 상태에 있습니다. 예를 들어, UI 이벤트를 처리하고 대량의 API 데이터를 쿼리 및 처리하고 DOM을 조작해야하는 사이트를 상상해보십시오. 불행히도 브라우저의 자바스크립트 런타임의 제한으로 인해이 모든 것이 동시에 이루어질 수는 없습니다.

이런 병목현상을 해결하기 위한 대안으로 등장한 게 자바스크립트 워커입니다. <span style="color:blue">자바스크립트 워커는 현재 window와는 다른 전역 맥락에서 동작하는 워커 스레드에서 작동합니다</span>.

